<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ­¦æ±‰ | å€’è®¡æ—¶</title>
    <style>
        /* --- 1. å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --font-stack: "Songti SC", "Noto Serif SC", "SimSun", serif;
            --accent-red: #cc2222;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-stack);
            overflow: hidden;
            user-select: none;
        }

        /* --- 2. è§†å·®å®¹å™¨ --- */
        #scene {
            position: relative;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            overflow: hidden;
        }

        /* --- 3. èƒŒæ™¯å±‚ï¼šçº¿ç´¢å¢™ --- */
        .layer-bg {
            position: absolute;
            top: -10%; left: -10%; width: 120%; height: 120%;
            z-index: 1;
            transform: translateZ(0);
            pointer-events: none;
        }

        .string-web { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.2; }
        .web-line { stroke: var(--accent-red); stroke-width: 1; opacity: 0.5; stroke-dasharray: 5,5; }

        .clue-item {
            position: absolute;
            background: #f0f0f0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.9);
            filter: grayscale(100%) brightness(0.4); 
            border: 1px solid #333;
            display: flex; justify-content: center; align-items: center;
            font-family: "Courier New", monospace; color: #111; font-weight: bold;
            font-size: 0.6rem; overflow: hidden;
        }
        .clue-item::after { content: ''; position: absolute; top: 5%; left: 5%; width: 90%; height: 75%; background: #222; opacity: 0.2; }
        
        .c1 { top: 15%; left: 10%; width: 120px; height: 150px; transform: rotate(-5deg); }
        .c2 { top: 20%; right: 15%; width: 140px; height: 100px; transform: rotate(3deg); }
        .c3 { bottom: 25%; left: 20%; width: 100px; height: 120px; transform: rotate(8deg); }
        .c4 { bottom: 10%; right: 10%; width: 160px; height: 110px; transform: rotate(-2deg); }
        .c5 { top: 50%; left: 50%; width: 220px; height: 160px; transform: translate(-120%, -120%) rotate(-15deg); opacity: 0.3; z-index: -1; }

        /* --- 4. å‰æ™¯å±‚ï¼šæ–‡å­—å†…å®¹ --- */
        .layer-content {
            position: relative;
            z-index: 10;
            text-align: center;
            text-shadow: 0 0 20px rgba(0,0,0,0.9); /* å¢å¼ºæ–‡å­—é˜´å½±ï¼Œè‡ªå¸¦å‘å…‰æ„Ÿ */
            transform: translateZ(30px);
        }

        .title {
            font-size: 1.4rem;
            letter-spacing: 0.3em;
            margin-bottom: 5vh;
            font-weight: 300;
            opacity: 0.9;
            position: relative;
            display: inline-block;
        }
        .title::after {
            content: ''; display: block; width: 40px; height: 1px; 
            background: #888; margin: 15px auto 0;
            box-shadow: 0 0 8px rgba(255,255,255,0.2); /* è£…é¥°çº¿ä¹Ÿå‘å…‰ */
        }

        .countdown-wrapper { display: flex; flex-direction: column; gap: 1.5vh; }
        .time-unit { font-size: 2.8rem; line-height: 1.1; font-weight: bold; letter-spacing: 0.05em; }
        .unit-label { font-size: 0.9rem; font-style: italic; opacity: 0.6; margin-left: 8px; font-weight: normal; font-family: "Georgia", serif; }
        .footer-text { margin-top: 6vh; font-size: 0.8rem; letter-spacing: 0.2em; opacity: 0.5; }

        /* --- 5. âœ¨ é«˜çº§å¹½çµæŒ‰é’® (å¸¦å‘å…‰å’Œç®­å¤´åŠ¨ç”») --- */
        .btn-container {
            position: fixed; bottom: 50px; left: 0; width: 100%;
            text-align: center; z-index: 20;
            pointer-events: none; /* å®¹å™¨ä¸æŒ¡é¼ æ ‡ */
        }

        .ghost-btn {
            pointer-events: auto; /* æŒ‰é’®æœ¬èº«æ¥æ”¶é¼ æ ‡ */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 32px;
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(0,0,0,0.4); /* åŠé€æ˜é»‘åº• */
            backdrop-filter: blur(4px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); /* ä¸æ»‘ç¼“åŠ¨ */
            cursor: pointer;
        }

        /* æ‚¬åœçŠ¶æ€ï¼šå‘å…‰ + æ”¾å¤§ + å˜äº® */
        .ghost-btn:hover {
            border-color: rgba(255, 255, 255, 0.9);
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
            /* ğŸ”¥ æ ¸å¿ƒå…‰æ™•æ•ˆæœ ğŸ”¥ */
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3), inset 0 0 10px rgba(255,255,255,0.05);
            transform: translateY(-2px) scale(1.02);
        }

        .ghost-btn:active { transform: translateY(0) scale(0.98); }

        /* ç®­å¤´å®¹å™¨ï¼šé»˜è®¤éšè— */
        .arrow-wrapper {
            width: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateX(-5px);
            transition: all 0.4s ease-out;
            display: flex; align-items: center;
        }

        /* æ‚¬åœæ—¶ï¼šç®­å¤´æ»‘å‡º */
        .ghost-btn:hover .arrow-wrapper {
            width: 16px; margin-left: 10px; opacity: 1; transform: translateX(0);
        }

        /* æƒé™æŒ‰é’®ä¹ŸåŠ ä¸€ç‚¹æ ·å¼ */
        #permission-btn {
            display: none; position: fixed; top: 20px; right: 20px; z-index: 50;
            background: rgba(0, 0, 0, 0.5); border: 1px solid #cc2222;
            color: #ff5555; padding: 8px 15px; font-size: 0.7rem; cursor: pointer;
            backdrop-filter: blur(2px); transition: 0.3s;
        }
        #permission-btn:hover { box-shadow: 0 0 15px rgba(204, 34, 34, 0.5); color: #fff; }

        /* --- 6. å“åº”å¼é€‚é… --- */
        @media (min-width: 768px) {
            .title { font-size: 2rem; margin-bottom: 8vh; }
            .countdown-wrapper { flex-direction: row; gap: 50px; }
            .time-unit { font-size: 5rem; }
            .unit-label { font-size: 1.2rem; }
            .clue-item { filter: grayscale(100%) brightness(0.3); }
        }

        @media (max-width: 767px) {
            .clue-item { filter: grayscale(100%) brightness(0.45); }
            .c2, .c4 { opacity: 0; }
        }

        /* --- 7. ğŸš€ ç©¿è¶Šç‰¹æ•ˆ (Shuttle Effect) --- */
        
        /* çŠ¶æ€ A: æ­£åœ¨ç©¿è¶Šä¸­ */
        body.is-exiting {
            pointer-events: none; /* ç¦æ­¢å†æ¬¡ç‚¹å‡» */
        }

        /* 1. èƒŒæ™¯å±‚ï¼šçŒ›çƒˆæ”¾å¤§ï¼Œä»¿ä½›å†²è¿›å» */
        body.is-exiting .layer-bg {
            transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1); /* åŠ é€Ÿæ›²çº¿ */
            transform: scale(15) translateZ(0) !important; /* æ”¾å¤§15å€ */
            opacity: 0; /* æœ€åå˜é»‘ */
        }

        /* 2. æ–‡å­—å±‚ï¼šè¿…é€Ÿæ¨¡ç³Šå¹¶åé€€æ¶ˆå¤± */
        body.is-exiting .layer-content {
            transition: all 0.5s ease-in;
            transform: scale(0.8) translateZ(-100px) !important;
            opacity: 0;
            filter: blur(10px);
        }

        /* 3. æŒ‰é’®ï¼šç¬é—´æ¶ˆå¤± */
        body.is-exiting .btn-container {
            transition: opacity 0.3s;
            opacity: 0;
        }
    </style>
</head>
<body>

    <div id="scene">
        <!-- çº¿ç´¢å¢™èƒŒæ™¯ -->
        <div class="layer-bg" id="bgLayer">
            <svg class="string-web">
                <line x1="15%" y1="20%" x2="50%" y2="50%" class="web-line"></line>
                <line x1="50%" y1="50%" x2="80%" y2="25%" class="web-line"></line>
                <line x1="20%" y1="75%" x2="50%" y2="50%" class="web-line"></line>
            </svg>
            <div class="clue-item c1">START</div>
            <div class="clue-item c2">UNKNOWN</div>
            <div class="clue-item c3">2026</div>
            <div class="clue-item c4">TARGET</div>
            <div class="clue-item c5">WUHAN</div>
        </div>

        <!-- æ–‡å­—å†…å®¹ -->
        <div class="layer-content" id="contentLayer">
            <div class="title">æ­¦æ±‰å¸‚ä¸­å¿ƒ</div>
            <div class="countdown-wrapper" id="timer"></div>
            <div class="footer-text">TARGET: 2026.03.06</div>
        </div>
    </div>

    <!-- åº•éƒ¨æŒ‰é’®ï¼šå¸¦ç®­å¤´åŠ¨ç”»å’Œå…‰æ™• -->
    <div class="btn-container">
        <a href="gallery.html" class="ghost-btn">
            <span>æŸ¥çœ‹çº¿ç´¢</span>
            <span class="arrow-wrapper">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
            </span>
        </a>
    </div>

    <button id="permission-btn">å¼€å¯ä½“æ„Ÿ</button>

    <script>
        // 1. å€’è®¡æ—¶
        const targetDate = new Date("2026-03-06T00:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime();
            const difference = targetDate - now;
            const timerElement = document.getElementById('timer');

            if (difference < 0) {
                timerElement.innerHTML = "<div class='time-unit'>ARRIVED</div>";
                return;
            }

            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            const fHours = hours < 10 ? "0" + hours : hours;
            const fMinutes = minutes < 10 ? "0" + minutes : minutes;
            const fSeconds = seconds < 10 ? "0" + seconds : seconds;

            timerElement.innerHTML = `
                <div class="time-unit">${days}<span class="unit-label">å¤©</span></div>
                <div class="time-unit">${fHours}<span class="unit-label">æ—¶</span></div>
                <div class="time-unit">${fMinutes}<span class="unit-label">åˆ†</span></div>
                <div class="time-unit">${fSeconds}<span class="unit-label">ç§’</span></div>
            `;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // 2. è§†å·®
        const bgLayer = document.getElementById('bgLayer');
        const contentLayer = document.getElementById('contentLayer');
        const windowCenterX = window.innerWidth / 2;
        const windowCenterY = window.innerHeight / 2;

        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX - windowCenterX;
            const mouseY = e.clientY - windowCenterY;
            bgLayer.style.transform = `translate(${mouseX/30}px, ${mouseY/30}px)`;
            contentLayer.style.transform = `translate(${mouseX/-20}px, ${mouseY/-20}px) rotateY(${mouseX/300}deg) rotateX(${-mouseY/300}deg) translateZ(30px)`;
        });

        function handleOrientation(event) {
            let x = event.gamma; let y = event.beta;
            if (x > 45) x = 45; if (x < -45) x = -45;
            if (y > 45) y = 45; if (y < -45) y = -45;
            bgLayer.style.transform = `translate(${x}px, ${y}px)`;
            contentLayer.style.transform = `translate(${x * -1.5}px, ${y * -1.5}px) translateZ(30px)`;
        }

        // 3. æƒé™
        const permBtn = document.getElementById('permission-btn');
        if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
            permBtn.style.display = 'block';
            permBtn.addEventListener('click', () => {
                DeviceOrientationEvent.requestPermission().then(r => {
                    if (r === 'granted') {
                        window.addEventListener('deviceorientation', handleOrientation);
                        permBtn.style.display = 'none';
                    }
                });
            });
        } else {
            window.addEventListener('deviceorientation', handleOrientation);
        }

        // --- 4. ğŸš€ ç©¿è¶Šè·³è½¬é€»è¾‘ ---
        const linkBtn = document.querySelector('.ghost-btn');
        
        linkBtn.addEventListener('click', function(e) {
            e.preventDefault(); // 1. é˜»æ­¢ç«‹å³è·³è½¬
            
            // 2. ç»™ body åŠ ä¸Šâ€œæ­£åœ¨ç©¿è¶Šâ€çš„æ ‡ç­¾ï¼Œè§¦å‘ CSS åŠ¨ç”»
            document.body.classList.add('is-exiting');

            // 3. ç­‰å¾… 800æ¯«ç§’ï¼ˆåŠ¨ç”»æ’­å®Œï¼‰åï¼Œå†çœŸæ­£è·³è½¬
            setTimeout(() => {
                window.location.href = this.href;
            }, 800);
        });
    </script>
</body>
</html>
