<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ­¦æ±‰ | å€’è®¡æ—¶</title>
    <style>
        /* --- 1. å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --font-stack: "Songti SC", "Noto Serif SC", "SimSun", serif;
            --accent-red: #cc2222;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-stack);
            overflow: hidden;
            user-select: none;
        }

        /* --- 2. æ ¸å¿ƒå®¹å™¨ä¸åŠ¨ç”» --- */
        #main-wrapper {
            position: relative; width: 100%; height: 100%;
            /* å›å½’åŠ¨ç”»ï¼šä»æ”¾å¤§çŠ¶æ€ç¼©å°å›æ¥ */
            animation: returnIn 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        /* ç¦»åœºçŠ¶æ€ï¼šçŒ›çƒˆæ”¾å¤§ */
        body.is-exiting #main-wrapper {
            transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1), opacity 0.8s ease-in;
            transform: scale(15) translateZ(0); 
            opacity: 0; pointer-events: none;
        }

        /* --- 3. è§†å·®åœºæ™¯ --- */
        #scene {
            position: relative; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            perspective: 1000px; overflow: hidden;
        }

        /* --- 4. èƒŒæ™¯å±‚ï¼šçº¿ç´¢å¢™ (å¤§å¹…å¢å¼º) --- */
        .layer-bg {
            position: absolute;
            /* èŒƒå›´æ‰©å¤§ï¼Œæ–¹ä¾¿æ”¾æ›´å¤šè¾¹ç¼˜çš„çº¿ç´¢ */
            top: -15%; left: -15%; width: 130%; height: 130%;
            z-index: 1;
            transform: translateZ(0);
            pointer-events: none;
        }

        .string-web { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.2; }
        .web-line { stroke: var(--accent-red); stroke-width: 0.8; opacity: 0.5; stroke-dasharray: 5,5; }

        /* çº¿ç´¢ç¢ç‰‡é€šç”¨æ ·å¼ */
        .clue-item {
            position: absolute;
            background: #f0f0f0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.9);
            /* ä¿æŒæš—è°ƒï¼Œä¸æŠ¢æ–‡å­—é£å¤´ */
            filter: grayscale(100%) brightness(0.35) contrast(1.1); 
            border: 1px solid #333;
            display: flex; justify-content: center; align-items: center;
            font-family: "Courier New", monospace; color: #111; font-weight: bold;
            font-size: 0.7rem; overflow: hidden;
            background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .clue-item.photo::after { content: ''; position: absolute; top: 5%; left: 5%; width: 90%; height: 75%; background: #222; opacity: 0.2; }
        .clue-item.note { background: #fffff0; border: none; font-size: 0.6rem; }
        .clue-item.map { background: #dcdcdc; border: 2px solid #555; }

        /* --- ğŸ”¥ ç”µè„‘ç«¯ä¸°å¯Œå¸ƒå±€ (20+ å…ƒç´ ) --- */
        /* ä¸­å¿ƒåŒº (ç¨å¾®ç•™ç™½ç»™æ–‡å­—) */
        .c1 { top: 20%; left: 25%; width: 120px; height: 160px; transform: rotate(-5deg); }
        .c2 { top: 25%; right: 25%; width: 140px; height: 110px; transform: rotate(3deg); }
        .c3 { bottom: 25%; left: 28%; width: 100px; height: 130px; transform: rotate(8deg); }
        .c4 { bottom: 20%; right: 28%; width: 160px; height: 120px; transform: rotate(-2deg); }
        
        /* è¾¹ç¼˜åŒº (å¡«è¡¥ç©ºç¼º) */
        .c5 { top: 10%; left: 10%; width: 100px; height: 140px; transform: rotate(15deg); }
        .c6 { top: 5%; right: 15%; width: 90px; height: 90px; transform: rotate(-10deg); }
        .c7 { bottom: 10%; left: 10%; width: 150px; height: 100px; transform: rotate(-5deg); }
        .c8 { bottom: 5%; right: 10%; width: 120px; height: 150px; transform: rotate(12deg); }
        
        /* æ·±å±‚èƒŒæ™¯ (æ¨¡ç³Šå¤„ç†) */
        .c9 { top: 50%; left: 10%; width: 80px; height: 80px; transform: rotate(45deg); opacity: 0.6; filter: blur(2px); }
        .c10 { top: 40%; right: 5%; width: 110px; height: 140px; transform: rotate(-15deg); opacity: 0.6; filter: blur(2px); }
        .c11 { top: 5%; left: 50%; width: 140px; height: 100px; transform: translate(-50%, 0) rotate(2deg); opacity: 0.5; z-index: -1; }
        .c12 { bottom: 2%; left: 50%; width: 100px; height: 100px; transform: translate(-50%, 0) rotate(-2deg); opacity: 0.5; z-index: -1; }
        
        /* æ›´å¤šç»†ç¢ç‚¹ç¼€ */
        .c13 { top: 15%; left: 40%; width: 60px; height: 60px; transform: rotate(-20deg); }
        .c14 { bottom: 30%; right: 15%; width: 70px; height: 90px; transform: rotate(20deg); }
        .c15 { top: 60%; left: 5%; width: 100px; height: 80px; transform: rotate(10deg); }
        .c16 { top: 30%; right: 40%; width: 50px; height: 70px; transform: rotate(-5deg); }
        .c17 { top: 80%; left: 20%; width: 80px; height: 80px; transform: rotate(30deg); }
        .c18 { top: 10%; right: 5%; width: 100px; height: 130px; transform: rotate(-8deg); }

        /* è¿œæ™¯å¤§å›¾ (æ°›å›´) */
        .c19 { top: 50%; left: 50%; width: 300px; height: 200px; transform: translate(-50%, -50%) rotate(-10deg); opacity: 0.15; z-index: -2; filter: blur(4px) !important; }
        .c20 { top: 45%; left: 60%; width: 200px; height: 150px; transform: translate(-50%, -50%) rotate(5deg); opacity: 0.15; z-index: -2; filter: blur(3px) !important; }

        /* --- 5. å‰æ™¯å±‚ï¼šæ–‡å­—å†…å®¹ --- */
        .layer-content {
            position: relative; z-index: 10; text-align: center;
            text-shadow: 0 0 20px rgba(0,0,0,0.9);
            transform: translateZ(30px);
        }

        .title {
            font-size: 1.4rem; letter-spacing: 0.3em; margin-bottom: 5vh;
            font-weight: 300; opacity: 0.9; position: relative; display: inline-block;
        }
        .title::after {
            content: ''; display: block; width: 40px; height: 1px; 
            background: #888; margin: 15px auto 0; box-shadow: 0 0 8px rgba(255,255,255,0.2);
        }

        .countdown-wrapper { display: flex; flex-direction: column; gap: 1.5vh; }
        .time-unit { font-size: 2.8rem; line-height: 1.1; font-weight: bold; letter-spacing: 0.05em; }
        .unit-label { font-size: 0.9rem; font-style: italic; opacity: 0.6; margin-left: 8px; font-weight: normal; font-family: "Georgia", serif; }
        .footer-text { margin-top: 6vh; font-size: 0.8rem; letter-spacing: 0.2em; opacity: 0.5; }

        /* --- 6. åº•éƒ¨æŒ‰é’® --- */
        .btn-container { position: fixed; bottom: 50px; left: 0; width: 100%; text-align: center; z-index: 20; }
        .ghost-btn {
            pointer-events: auto; display: inline-flex; align-items: center; justify-content: center;
            padding: 12px 32px; font-size: 0.85rem; letter-spacing: 0.2em;
            color: rgba(255, 255, 255, 0.6); text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer;
        }
        .ghost-btn:hover {
            border-color: rgba(255, 255, 255, 0.9); color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3), inset 0 0 10px rgba(255,255,255,0.05);
            transform: translateY(-2px) scale(1.02);
        }
        .arrow-wrapper { width: 0; overflow: hidden; opacity: 0; transform: translateX(-5px); transition: all 0.4s ease-out; display: flex; align-items: center; }
        .ghost-btn:hover .arrow-wrapper { width: 16px; margin-left: 10px; opacity: 1; transform: translateX(0); }

        #permission-btn {
            display: none; position: fixed; top: 20px; right: 20px; z-index: 50;
            background: rgba(0, 0, 0, 0.5); border: 1px solid #cc2222;
            color: #ff5555; padding: 8px 15px; font-size: 0.7rem; cursor: pointer;
            backdrop-filter: blur(2px); transition: 0.3s;
        }

        @keyframes returnIn {
            0% { opacity: 0; transform: scale(1.5); filter: blur(10px); }
            100% { opacity: 1; transform: scale(1); filter: blur(0); }
        }

        /* --- 7. é€‚é… --- */
        @media (min-width: 768px) {
            .title { font-size: 2rem; margin-bottom: 8vh; }
            .countdown-wrapper { flex-direction: row; gap: 50px; }
            .time-unit { font-size: 5rem; }
            .unit-label { font-size: 1.2rem; }
            /* ç”µè„‘ç«¯å†æš—ä¸€ç‚¹ï¼Œé˜²æ­¢å¹²æ‰° */
            .clue-item { filter: grayscale(100%) brightness(0.3) contrast(1.2); }
        }

        @media (max-width: 767px) {
            .clue-item { filter: grayscale(100%) brightness(0.45); }
            /* æ‰‹æœºä¸Šéšè—ä¸€éƒ¨åˆ†ï¼Œé˜²æ­¢å¤ªä¹± */
            .c9, .c10, .c13, .c14, .c15, .c16, .c17, .c18 { display: none; }
        }
    </style>
</head>
<body>

    <div id="main-wrapper">
        <div id="scene">
            <div class="layer-bg" id="bgLayer">
                <svg class="string-web">
                    <line x1="15%" y1="20%" x2="50%" y2="50%" class="web-line"></line>
                    <line x1="50%" y1="50%" x2="80%" y2="25%" class="web-line"></line>
                    <line x1="20%" y1="75%" x2="50%" y2="50%" class="web-line"></line>
                    <line x1="10%" y1="10%" x2="25%" y2="20%" class="web-line"></line>
                    <line x1="90%" y1="80%" x2="70%" y2="60%" class="web-line"></line>
                    <line x1="40%" y1="5%" x2="60%" y2="10%" class="web-line"></line>
                </svg>

                <div class="clue-item photo c1">START</div>
                <div class="clue-item photo c2">UNKNOWN</div>
                <div class="clue-item photo c3">2026</div>
                <div class="clue-item photo c4">TARGET</div>
                
                <div class="clue-item note c5">WHO?</div>
                <div class="clue-item note c6">LOC</div>
                <div class="clue-item map c7">MAP</div>
                <div class="clue-item photo c8">KEY</div>
                
                <div class="clue-item note c9">?</div>
                <div class="clue-item photo c10">X</div>
                <div class="clue-item note c11">NO TIME</div>
                <div class="clue-item note c12">PLAN</div>
                
                <div class="clue-item note c13">A</div>
                <div class="clue-item note c14">B</div>
                <div class="clue-item photo c15">EYE</div>
                <div class="clue-item note c16">!</div>
                <div class="clue-item map c17">CITY</div>
                <div class="clue-item photo c18">OLD</div>
                
                <div class="clue-item map c19">WUHAN</div>
                <div class="clue-item photo c20">EVIDENCE</div>
            </div>

            <div class="layer-content" id="contentLayer">
                <div class="title">æ­¦æ±‰å¸‚ä¸­å¿ƒ</div>
                <div class="countdown-wrapper" id="timer"></div>
                <div class="footer-text">TARGET: 2026.03.06</div>
            </div>
        </div>

        <div class="btn-container">
            <a href="gallery.html" class="ghost-btn">
                <span>æŸ¥çœ‹çº¿ç´¢</span>
                <span class="arrow-wrapper">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </span>
            </a>
        </div>
    </div>

    <button id="permission-btn">å¼€å¯ä½“æ„Ÿ</button>

    <script>
        // å€’è®¡æ—¶
        const targetDate = new Date("2026-03-06T00:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime();
            const difference = targetDate - now;
            const timerElement = document.getElementById('timer');
            if (difference < 0) {
                timerElement.innerHTML = "<div class='time-unit'>ARRIVED</div>";
                return;
            }
            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            const fHours = hours < 10 ? "0" + hours : hours;
            const fMinutes = minutes < 10 ? "0" + minutes : minutes;
            const fSeconds = seconds < 10 ? "0" + seconds : seconds;
            timerElement.innerHTML = `
                <div class="time-unit">${days}<span class="unit-label">å¤©</span></div>
                <div class="time-unit">${fHours}<span class="unit-label">æ—¶</span></div>
                <div class="time-unit">${fMinutes}<span class="unit-label">åˆ†</span></div>
                <div class="time-unit">${fSeconds}<span class="unit-label">ç§’</span></div>
            `;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // è§†å·®ä¸åŠ¨ç”»
        const bgLayer = document.getElementById('bgLayer');
        const contentLayer = document.getElementById('contentLayer');
        const windowCenterX = window.innerWidth / 2;
        const windowCenterY = window.innerHeight / 2;
        const linkBtn = document.querySelector('.ghost-btn');

        linkBtn.addEventListener('click', function(e) {
            e.preventDefault();
            document.body.classList.add('is-exiting');
            setTimeout(() => { window.location.href = this.href; }, 800);
        });

        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX - windowCenterX;
            const mouseY = e.clientY - windowCenterY;
            bgLayer.style.transform = `translate(${mouseX/30}px, ${mouseY/30}px)`;
            contentLayer.style.transform = `translate(${mouseX/-20}px, ${mouseY/-20}px) rotateY(${mouseX/300}deg) rotateX(${-mouseY/300}deg) translateZ(30px)`;
        });

        function handleOrientation(event) {
            let x = event.gamma; let y = event.beta;
            if (x > 45) x = 45; if (x < -45) x = -45;
            if (y > 45) y = 45; if (y < -45) y = -45;
            bgLayer.style.transform = `translate(${x}px, ${y}px)`;
            contentLayer.style.transform = `translate(${x * -1.5}px, ${y * -1.5}px) translateZ(30px)`;
        }

        const permBtn = document.getElementById('permission-btn');
        if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
            permBtn.style.display = 'block';
            permBtn.addEventListener('click', () => {
                DeviceOrientationEvent.requestPermission().then(r => {
                    if (r === 'granted') {
                        window.addEventListener('deviceorientation', handleOrientation);
                        permBtn.style.display = 'none';
                    }
                });
            });
        } else {
            window.addEventListener('deviceorientation', handleOrientation);
        }
    </script>
</body>
</html>
