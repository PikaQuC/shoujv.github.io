<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ­¦æ±‰ | å€’è®¡æ—¶</title>
    <style>
        /* --- 1. å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --font-stack: "Songti SC", "Noto Serif SC", "SimSun", serif;
            --accent-red: #cc2222;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-stack);
            overflow: hidden;
            user-select: none;
        }

        /* --- 2. è§†å·®å®¹å™¨ --- */
        #scene {
            position: relative;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            overflow: hidden;
        }

        /* --- 3. èƒŒæ™¯å±‚ï¼šæ··ä¹±çº¿ç´¢å¢™ (å¤§å¹…å‡çº§) --- */
        .layer-bg {
            position: absolute;
            /* èŒƒå›´æ‰©å¤§ï¼Œæ–¹ä¾¿æ”¾æ›´å¤šè¾¹ç¼˜çš„çº¿ç´¢ */
            top: -15%; left: -15%; width: 130%; height: 130%;
            z-index: 1;
            transform: translateZ(0);
            pointer-events: none;
        }

        /* çº¢çº¿ç½‘ï¼šæ›´å¯†é›† */
        .string-web { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.3; }
        .web-line { stroke: var(--accent-red); stroke-width: 0.8; opacity: 0.6; stroke-dasharray: 0; }

        /* çº¿ç´¢é€šç”¨æ ·å¼ */
        .clue-item {
            position: absolute;
            background: #f4f4f4;
            box-shadow: 0 5px 15px rgba(0,0,0,0.8);
            /* é»˜è®¤éƒ½å¾ˆæš—ï¼Œä¿è¯ä¸æŠ¢æ–‡å­— */
            filter: grayscale(100%) brightness(0.35) contrast(1.2); 
            border: 1px solid #222;
            display: flex; justify-content: center; align-items: center;
            font-family: "Courier New", monospace; color: #111; font-weight: bold;
            font-size: 0.5rem; overflow: hidden;
            /* å¢åŠ ä¸€ç‚¹çº¸å¼ çš„ç²—ç³™çº¹ç† */
            background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        /* æ¨¡æ‹Ÿç…§ç‰‡é»‘æ¡† */
        .clue-item.photo::after { content: ''; position: absolute; top: 5%; left: 5%; width: 90%; height: 75%; background: #222; opacity: 0.3; }
        /* æ¨¡æ‹Ÿä¾¿ç­¾çº¸ */
        .clue-item.note { background: #fffff0; border: none; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .clue-item.map { background: #e0e0e0; border: 2px solid #555; }

        /* --- ğŸ”¥ æ··ä¹±å¸ƒå±€å®šä¹‰ (13ä¸ªç‚¹ä½) --- */
        /* å·¦ä¸ŠåŒº */
        .c1 { top: 15%; left: 10%; width: 120px; height: 150px; transform: rotate(-8deg); z-index: 2; }
        .c6 { top: 5%; left: 25%; width: 80px; height: 80px; transform: rotate(15deg); z-index: 1; } /* ä¾¿ç­¾ */
        .c10 { top: 25%; left: 5%; width: 160px; height: 100px; transform: rotate(5deg); z-index: 0; opacity: 0.5; filter: blur(1px) brightness(0.2) !important; } /* è¿œæ™¯åœ°å›¾ */

        /* å³ä¸ŠåŒº */
        .c2 { top: 18%; right: 15%; width: 140px; height: 100px; transform: rotate(6deg); z-index: 2; }
        .c7 { top: 10%; right: 30%; width: 90px; height: 120px; transform: rotate(-12deg); z-index: 1; }
        .c11 { top: 5%; right: 5%; width: 100px; height: 100px; transform: rotate(20deg); z-index: 0; }

        /* å·¦ä¸‹åŒº */
        .c3 { bottom: 20%; left: 20%; width: 100px; height: 130px; transform: rotate(12deg); z-index: 2; }
        .c8 { bottom: 35%; left: 8%; width: 110px; height: 90px; transform: rotate(-5deg); z-index: 1; }
        .c12 { bottom: 10%; left: 35%; width: 70px; height: 70px; transform: rotate(45deg); z-index: 3; } /* å°çº¸ç‰‡ */

        /* å³ä¸‹åŒº */
        .c4 { bottom: 15%; right: 12%; width: 150px; height: 110px; transform: rotate(-6deg); z-index: 2; }
        .c9 { bottom: 30%; right: 28%; width: 100px; height: 140px; transform: rotate(8deg); z-index: 1; }

        /* ä¸­é—´èƒŒæ™¯åŒº (æ¨¡ç³Šå¤„ç†ï¼Œå¢åŠ æ™¯æ·±) */
        .c5 { top: 50%; left: 50%; width: 250px; height: 180px; transform: translate(-50%, -50%) rotate(-10deg); opacity: 0.2; z-index: -1; filter: blur(2px) grayscale(100%) !important; }
        .c13 { top: 40%; left: 60%; width: 180px; height: 120px; transform: translate(-50%, -50%) rotate(5deg); opacity: 0.15; z-index: -2; filter: blur(3px) grayscale(100%) !important; }

        /* --- 4. å‰æ™¯å±‚ï¼šæ–‡å­— --- */
        .layer-content {
            position: relative; z-index: 10;
            text-align: center;
            text-shadow: 0 0 30px rgba(0,0,0,1); /* åŠ é‡æ–‡å­—é˜´å½±ï¼Œé˜²æ­¢èƒŒæ™¯å¤ªä¹±çœ‹ä¸æ¸… */
            transform: translateZ(40px);
        }

        .title {
            font-size: 1.4rem; letter-spacing: 0.3em; margin-bottom: 5vh;
            font-weight: 300; opacity: 0.95; position: relative; display: inline-block;
        }
        .title::after {
            content: ''; display: block; width: 40px; height: 1px; 
            background: #aaa; margin: 15px auto 0;
            box-shadow: 0 0 8px rgba(255,255,255,0.3);
        }

        .countdown-wrapper { display: flex; flex-direction: column; gap: 1.5vh; }
        .time-unit { font-size: 2.8rem; line-height: 1.1; font-weight: bold; letter-spacing: 0.05em; }
        .unit-label { font-size: 0.9rem; font-style: italic; opacity: 0.6; margin-left: 8px; font-weight: normal; font-family: "Georgia", serif; }
        .footer-text { margin-top: 6vh; font-size: 0.8rem; letter-spacing: 0.2em; opacity: 0.5; }

        /* --- 5. ç©¿è¶Šç‰¹æ•ˆ CSS --- */
        body.is-exiting { pointer-events: none; }
        body.is-exiting .layer-bg {
            transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
            transform: scale(8) translateZ(0) !important; /* æ”¾å¤§å€æ•°ç¨å¾®å‡å°ä¸€ç‚¹ï¼Œå› ä¸ºç°åœ¨ä¸œè¥¿å¤šäº† */
            opacity: 0;
        }
        body.is-exiting .layer-content {
            transition: all 0.5s ease-in;
            transform: scale(0.8) translateZ(-100px) !important;
            opacity: 0; filter: blur(10px);
        }
        body.is-exiting .btn-container { transition: opacity 0.3s; opacity: 0; }

        /* --- 6. æŒ‰é’®æ ·å¼ --- */
        .btn-container {
            position: fixed; bottom: 50px; left: 0; width: 100%;
            text-align: center; z-index: 20; pointer-events: none;
        }
        .ghost-btn {
            pointer-events: auto; display: inline-flex; align-items: center; justify-content: center;
            padding: 12px 32px; font-size: 0.85rem; letter-spacing: 0.2em;
            color: rgba(255, 255, 255, 0.6); text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(0,0,0,0.6); /* æŒ‰é’®åº•è‰²åŠ æ·±ï¼Œé˜²æ­¢èƒŒæ™¯å¤ªä¹±å¹²æ‰° */
            backdrop-filter: blur(4px); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .ghost-btn:hover {
            border-color: rgba(255, 255, 255, 0.9); color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3), inset 0 0 10px rgba(255,255,255,0.05);
            transform: translateY(-2px) scale(1.02);
        }
        .arrow-wrapper {
            width: 0; overflow: hidden; opacity: 0; transform: translateX(-5px);
            transition: all 0.4s ease-out; display: flex; align-items: center;
        }
        .ghost-btn:hover .arrow-wrapper { width: 16px; margin-left: 10px; opacity: 1; transform: translateX(0); }

        #permission-btn {
            display: none; position: fixed; top: 20px; right: 20px; z-index: 50;
            background: rgba(0, 0, 0, 0.5); border: 1px solid #cc2222;
            color: #ff5555; padding: 8px 15px; font-size: 0.7rem; cursor: pointer;
            backdrop-filter: blur(2px); transition: 0.3s;
        }

        /* --- 7. é€‚é… --- */
        @media (min-width: 768px) {
            .title { font-size: 2rem; margin-bottom: 8vh; }
            .countdown-wrapper { flex-direction: row; gap: 50px; }
            .time-unit { font-size: 5rem; }
            .unit-label { font-size: 1.2rem; }
            .clue-item { filter: grayscale(100%) brightness(0.25) contrast(1.2); } /* ç”µè„‘ä¸Šæ›´æš—ä¸€ç‚¹ */
        }
        @media (max-width: 767px) {
            /* æ‰‹æœºä¸Šéšè—æœ€è¾¹ç¼˜çš„å‡ ä¸ªï¼Œé˜²æ­¢æº¢å‡ºå¤ªå¤š */
            .c10, .c11, .c12 { display: none; }
        }
    </style>
</head>
<body>

    <div id="scene">
        
        <div class="layer-bg" id="bgLayer">
            <svg class="string-web">
                <line x1="10%" y1="15%" x2="50%" y2="50%" class="web-line"></line>
                <line x1="90%" y1="18%" x2="50%" y2="50%" class="web-line"></line>
                <line x1="20%" y1="80%" x2="50%" y2="50%" class="web-line"></line>
                <line x1="25%" y1="5%" x2="10%" y2="15%" class="web-line"></line>
                <line x1="88%" y1="85%" x2="60%" y2="40%" class="web-line"></line>
                <line x1="30%" y1="10%" x2="70%" y2="10%" class="web-line"></line>
            </svg>

            <div class="clue-item photo c1">EVIDENCE</div>
            <div class="clue-item photo c2">SUSPECT</div>
            <div class="clue-item photo c3">2026.03</div>
            <div class="clue-item photo c4">TARGET</div>

            <div class="clue-item map c5">MAP WUHAN</div>
            <div class="clue-item map c13">PLAN B</div>

            <div class="clue-item note c6">???</div>
            <div class="clue-item photo c7">UNKNOWN</div>
            <div class="clue-item note c8">LOC</div>
            <div class="clue-item photo c9">KEY</div>
            
            <div class="clue-item map c10">AREA 51</div>
            <div class="clue-item note c11">NO TIME</div>
            <div class="clue-item note c12">!</div>
        </div>

        <div class="layer-content" id="contentLayer">
            <div class="title">æ­¦æ±‰å¸‚ä¸­å¿ƒ</div>
            <div class="countdown-wrapper" id="timer"></div>
            <div class="footer-text">TARGET: 2026.03.06</div>
        </div>

    </div>

    <div class="btn-container">
        <a href="gallery.html" class="ghost-btn">
            <span>æŸ¥çœ‹çº¿ç´¢</span>
            <span class="arrow-wrapper">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
            </span>
        </a>
    </div>

    <button id="permission-btn">å¼€å¯ä½“æ„Ÿ</button>

    <script>
        // å€’è®¡æ—¶
        const targetDate = new Date("2026-03-06T00:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime();
            const difference = targetDate - now;
            const timerElement = document.getElementById('timer');
            if (difference < 0) {
                timerElement.innerHTML = "<div class='time-unit'>ARRIVED</div>";
                return;
            }
            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            const fHours = hours < 10 ? "0" + hours : hours;
            const fMinutes = minutes < 10 ? "0" + minutes : minutes;
            const fSeconds = seconds < 10 ? "0" + seconds : seconds;
            timerElement.innerHTML = `
                <div class="time-unit">${days}<span class="unit-label">å¤©</span></div>
                <div class="time-unit">${fHours}<span class="unit-label">æ—¶</span></div>
                <div class="time-unit">${fMinutes}<span class="unit-label">åˆ†</span></div>
                <div class="time-unit">${fSeconds}<span class="unit-label">ç§’</span></div>
            `;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // ç©¿æ¢­é€»è¾‘
        const linkBtn = document.querySelector('.ghost-btn');
        linkBtn.addEventListener('click', function(e) {
            e.preventDefault();
            document.body.classList.add('is-exiting');
            setTimeout(() => { window.location.href = this.href; }, 800);
        });

        // è§†å·®æ•ˆæœ
        const bgLayer = document.getElementById('bgLayer');
        const contentLayer = document.getElementById('contentLayer');
        const windowCenterX = window.innerWidth / 2;
        const windowCenterY = window.innerHeight / 2;

        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX - windowCenterX;
            const mouseY = e.clientY - windowCenterY;
            bgLayer.style.transform = `translate(${mouseX/35}px, ${mouseY/35}px)`;
            contentLayer.style.transform = `translate(${mouseX/-25}px, ${mouseY/-25}px) rotateY(${mouseX/350}deg) rotateX(${-mouseY/350}deg) translateZ(40px)`;
        });

        function handleOrientation(event) {
            let x = event.gamma; let y = event.beta;
            if (x > 45) x = 45; if (x < -45) x = -45;
            if (y > 45) y = 45; if (y < -45) y = -45;
            bgLayer.style.transform = `translate(${x}px, ${y}px)`;
            contentLayer.style.transform = `translate(${x * -1.5}px, ${y * -1.5}px) translateZ(40px)`;
        }

        const permBtn = document.getElementById('permission-btn');
        if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
            permBtn.style.display = 'block';
            permBtn.addEventListener('click', () => {
                DeviceOrientationEvent.requestPermission().then(r => {
                    if (r === 'granted') {
                        window.addEventListener('deviceorientation', handleOrientation);
                        permBtn.style.display = 'none';
                    }
                });
            });
        } else {
            window.addEventListener('deviceorientation', handleOrientation);
        }
    </script>
</body>
</html>
